<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-09-18">

<title>G.R.’s Blog - My matplotlib stylesheet</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="G.R.’s Blog - My matplotlib stylesheet">
<meta property="og:description" content="Sometimes you need to make your matplotlib plots look like they were generated by other libraries">
<meta property="og:image" content="https://grigolet.github.io/posts/my-matplotlib-stylesheet/preview.png">
<meta property="og:site-name" content="G.R.'s Blog">
<meta property="og:image:height" content="1197">
<meta property="og:image:width" content="1622">
<meta name="twitter:title" content="G.R.’s Blog - My matplotlib stylesheet">
<meta name="twitter:description" content="Sometimes you need to make your matplotlib plots look like they were generated by other libraries">
<meta name="twitter:image" content="https://grigolet.github.io/posts/my-matplotlib-stylesheet/preview.png">
<meta name="twitter:image-height" content="1197">
<meta name="twitter:image-width" content="1622">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">G.R.’s Blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/grigolet"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/gianrigoletti"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">My matplotlib stylesheet</h1>
            <p class="subtitle lead">Sometimes you need to make your matplotlib plots look like they were generated by other libraries</p>
                                <div class="quarto-categories">
                <div class="quarto-category">python</div>
                <div class="quarto-category">matplotlib</div>
                <div class="quarto-category">plot</div>
                <div class="quarto-category">visualization</div>
                <div class="quarto-category">style</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 18, 2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#styling-matplotlib-plots" id="toc-styling-matplotlib-plots" class="nav-link" data-scroll-target="#styling-matplotlib-plots">Styling matplotlib plots</a>
  <ul class="collapse">
  <li><a href="#lines" id="toc-lines" class="nav-link" data-scroll-target="#lines">LINES</a></li>
  <li><a href="#patches" id="toc-patches" class="nav-link" data-scroll-target="#patches">PATCHES</a></li>
  <li><a href="#font" id="toc-font" class="nav-link" data-scroll-target="#font">FONT</a></li>
  <li><a href="#axes-and-axis" id="toc-axes-and-axis" class="nav-link" data-scroll-target="#axes-and-axis">AXES and AXIS</a></li>
  <li><a href="#ticks" id="toc-ticks" class="nav-link" data-scroll-target="#ticks">TICKS</a></li>
  <li><a href="#grid" id="toc-grid" class="nav-link" data-scroll-target="#grid">GRID</a></li>
  <li><a href="#legend" id="toc-legend" class="nav-link" data-scroll-target="#legend">LEGEND</a></li>
  <li><a href="#figure" id="toc-figure" class="nav-link" data-scroll-target="#figure">FIGURE</a></li>
  <li><a href="#other-tweakings" id="toc-other-tweakings" class="nav-link" data-scroll-target="#other-tweakings">Other tweakings</a></li>
  </ul></li>
  <li><a href="#final-results" id="toc-final-results" class="nav-link" data-scroll-target="#final-results">Final results</a></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>When working on R&amp;D of gasesous detectors I tend to produce lots of plots for internal group discussions, conference presentations and publication publishing. Since most of these plots shows performance relative to gaseous detectors and since I am based at CERN I get to see lot of similar plots made by some other groups using <a href="https://root.cern.ch/">ROOT</a>, the de-facto standard analysis tool for high energy physics.</p>
<p>If I really have to be honest I have never liked ROOT so much, although I understand it provides several useful tools, from plotting data and fitting functions to GUI toolkits. Most, if not all the plots regarding the discovery of the Higgs boson were produced using ROOT. The layout of ROOT plots is then recognized and approved by the majority of the community in high energy physics.</p>
<p>If we have to compare a default plot made using root versus a default plot made with matplotlib, this would be the result</p>
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> ROOT <span class="im">as</span> rt</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a>x <span class="op">=</span> np.array([<span class="fl">321.0</span>, <span class="fl">860.0</span>, <span class="fl">777.0</span>, <span class="fl">562.0</span>, <span class="fl">374.0</span>, <span class="fl">132.0</span>, <span class="fl">816.0</span>, <span class="fl">220.0</span>, <span class="fl">253.0</span>])</span>
<span id="cb1-6"><a href="#cb1-6"></a>y <span class="op">=</span> np.array([<span class="fl">134.0</span>,<span class="fl">307.0</span>,<span class="fl">299.0</span>,<span class="fl">213.0</span>,<span class="fl">135.0</span>,<span class="fl">50.0</span>,<span class="fl">297.0</span>,<span class="fl">85.0</span>,<span class="fl">95.0</span>])</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># Let's just make sure we are using the default settings now</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>plt.style.use(<span class="st">'default'</span>)</span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co"># Matplotlib</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb1-13"><a href="#cb1-13"></a>ax.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Rate vs. Currents'</span>, xlabel<span class="op">=</span><span class="st">'Rate [Hz/cm$^2$]'</span>, ylabel<span class="op">=</span><span class="st">'Currents [uA]'</span>)</span>
<span id="cb1-14"><a href="#cb1-14"></a>ax.plot(x, y, <span class="st">'.'</span>)</span>
<span id="cb1-15"><a href="#cb1-15"></a>ax.axhline(<span class="dv">150</span>, color<span class="op">=</span><span class="st">'r'</span>)</span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co"># ROOT</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>canvas <span class="op">=</span> rt.TCanvas(<span class="st">"rate_vs_current"</span>, <span class="st">"Rate vs. Currents"</span>)</span>
<span id="cb1-19"><a href="#cb1-19"></a>graph <span class="op">=</span> rt.TGraph(<span class="bu">len</span>(x), x, y)</span>
<span id="cb1-20"><a href="#cb1-20"></a>graph.SetTitle(<span class="st">"Rate vs. Currents"</span>)</span>
<span id="cb1-21"><a href="#cb1-21"></a>graph.SetMarkerStyle(<span class="dv">7</span>)</span>
<span id="cb1-22"><a href="#cb1-22"></a>graph.GetXaxis().SetTitle(<span class="st">"Rate [Hz/cm^</span><span class="sc">{2}</span><span class="st">]"</span>)</span>
<span id="cb1-23"><a href="#cb1-23"></a>graph.GetYaxis().SetTitle(<span class="st">"Currents [uA]"</span>)</span>
<span id="cb1-24"><a href="#cb1-24"></a>line <span class="op">=</span> rt.TLine(graph.GetXaxis().GetXmin(), <span class="dv">150</span>, graph.GetXaxis().GetXmax(), <span class="dv">150</span>)</span>
<span id="cb1-25"><a href="#cb1-25"></a>line.SetLineColor(rt.kRed)</span>
<span id="cb1-26"><a href="#cb1-26"></a>graph.Draw(<span class="st">'AP'</span>)</span>
<span id="cb1-27"><a href="#cb1-27"></a>line.Draw(<span class="st">"L"</span>)</span>
<span id="cb1-28"><a href="#cb1-28"></a>canvas.Draw()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell quarto-layout-panel" data-execution_count="14">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-default-matplotlib" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-default-matplotlib-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Default matplotlib plot</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-default-matplotlib" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-default-matplotlib-output-2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Default ROOT plot</figcaption><p></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="styling-matplotlib-plots" class="level1">
<h1>Styling matplotlib plots</h1>
<p>My goal here is to have the matplotlib plot to look a bit more like the ROOT one. I recently came to find that there is a python package called <a href="https://github.com/scikit-hep/mplhep">mplhep</a> that is aiming at producing ROOT-like style plots used in high energy physics. I found the package to be really helpful, especially when there is the need to add some labels regarding collaborations. However, in my particular case, I noticed that the default axes ticks, labels, spines layout were matching more matplotlib defaults than ROOT ones.</p>
<p>Before I came to know <code>mplhep</code> I decided to create my own <a href="https://matplotlib.org/stable/tutorials/introductory/customizing.html#matplotlibrc-sample">matplotlibrc</a> file, which, as the name may suggest, is a file containing defaults used to style matplotlib plots.</p>
<p>If you have a look at the default <code>matplotlibrc</code> content, you could see that it is organized in sections. Within each section you can find a set of defaults.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>default_matplotlibrc.txt</strong></pre>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource txt number-lines code-with-copy"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1"></a>...</span>
<span id="cb2-2"><a href="#cb2-2"></a>## Matplotlib configuration are currently divided into following parts:</span>
<span id="cb2-3"><a href="#cb2-3"></a>##     - BACKENDS</span>
<span id="cb2-4"><a href="#cb2-4"></a>##     - LINES</span>
<span id="cb2-5"><a href="#cb2-5"></a>##     - PATCHES</span>
<span id="cb2-6"><a href="#cb2-6"></a>##     - HATCHES</span>
<span id="cb2-7"><a href="#cb2-7"></a>##     - BOXPLOT</span>
<span id="cb2-8"><a href="#cb2-8"></a>##     - FONT</span>
<span id="cb2-9"><a href="#cb2-9"></a>##     - TEXT</span>
<span id="cb2-10"><a href="#cb2-10"></a>##     - LaTeX</span>
<span id="cb2-11"><a href="#cb2-11"></a>##     - AXES</span>
<span id="cb2-12"><a href="#cb2-12"></a>##     - DATES</span>
<span id="cb2-13"><a href="#cb2-13"></a>##     - TICKS</span>
<span id="cb2-14"><a href="#cb2-14"></a>##     - GRIDS</span>
<span id="cb2-15"><a href="#cb2-15"></a>##     - LEGEND</span>
<span id="cb2-16"><a href="#cb2-16"></a>##     - FIGURE</span>
<span id="cb2-17"><a href="#cb2-17"></a>##     - IMAGES</span>
<span id="cb2-18"><a href="#cb2-18"></a>##     - CONTOUR PLOTS</span>
<span id="cb2-19"><a href="#cb2-19"></a>##     - ERRORBAR PLOTS</span>
<span id="cb2-20"><a href="#cb2-20"></a>##     - HISTOGRAM PLOTS</span>
<span id="cb2-21"><a href="#cb2-21"></a>##     - SCATTER PLOTS</span>
<span id="cb2-22"><a href="#cb2-22"></a>##     - AGG RENDERING</span>
<span id="cb2-23"><a href="#cb2-23"></a>##     - PATHS</span>
<span id="cb2-24"><a href="#cb2-24"></a>##     - SAVING FIGURES</span>
<span id="cb2-25"><a href="#cb2-25"></a>##     - INTERACTIVE KEYMAPS</span>
<span id="cb2-26"><a href="#cb2-26"></a>##     - ANIMATION</span>
<span id="cb2-27"><a href="#cb2-27"></a>...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I will detail the sections that I have modified to make plots look more like ROOT ones.</p>
<section id="lines" class="level2">
<h2 class="anchored" data-anchor-id="lines">LINES</h2>
<p>In the <code>LINES</code> section the only default value that I have changed is the <code>lines.linewidth</code> set to 0.5, instead of the 1.5 default value.</p>
</section>
<section id="patches" class="level2">
<h2 class="anchored" data-anchor-id="patches">PATCHES</h2>
<p>In the <code>PATCHES</code> section I have also decrease the <code>patch.linewidth</code> to 0.5</p>
</section>
<section id="font" class="level2">
<h2 class="anchored" data-anchor-id="font">FONT</h2>
<p>For the font I haven’t found any easy way to add a web font into matplotlib without adding some lines of code. For this reason I have installed GNU Free font and modified the order of the <code>sans-serif</code> font to be: <code>Helvetica, FreeSans, Nimbus Sans, DejaVu Sans, Bitstream Vera Sans, Computer Modern Sans Serif, Lucida Grande, Verdana, Geneva, Lucid, Arial, Avant Garde, sans-serif</code></p>
<p>In the <code>FONT</code> section I have set <code>font.weight</code> to <code>regular</code> by default.</p>
</section>
<section id="axes-and-axis" class="level2">
<h2 class="anchored" data-anchor-id="axes-and-axis">AXES and AXIS</h2>
<p>In the <code>AXES</code> and <code>AXIS</code> sections I tweaked multiple lines. I will report only the modified lines:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>my_matplotlibrc.txt</strong></pre>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource txt number-lines code-with-copy"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1"></a># AXES</span>
<span id="cb3-2"><a href="#cb3-2"></a>axes.grid           : False   ## display grid or not</span>
<span id="cb3-3"><a href="#cb3-3"></a>axes.labelsize      : x-large  ## fontsize of the x any y labels</span>
<span id="cb3-4"><a href="#cb3-4"></a>axes.labelweight    : regular  ## weight of the x and y labels</span>
<span id="cb3-5"><a href="#cb3-5"></a>axes.formatter.useoffset      : False    ## If True, the tick label formatter</span>
<span id="cb3-6"><a href="#cb3-6"></a>axes.formatter.offset_threshold : 2     ## When useoffset is True, the offset</span>
<span id="cb3-7"><a href="#cb3-7"></a>...</span>
<span id="cb3-8"><a href="#cb3-8"></a># AXIS</span>
<span id="cb3-9"><a href="#cb3-9"></a>xaxis.labellocation: right  # alignment of the xaxis label: {left, right, center}</span>
<span id="cb3-10"><a href="#cb3-10"></a>yaxis.labellocation: top  # alignment of the yaxis label: {bottom, top, center}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ticks" class="level2">
<h2 class="anchored" data-anchor-id="ticks">TICKS</h2>
<p>Matplotlib’s tick layout is what differs the most from ROOT default’s style. In this case the modified lines were the following:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>my_matplotlibrc.txt</strong></pre>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource txt number-lines code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1"></a>xtick.top            : True  ## draw ticks on the top side</span>
<span id="cb4-2"><a href="#cb4-2"></a>xtick.major.size     : 8    ## major tick size in points</span>
<span id="cb4-3"><a href="#cb4-3"></a>xtick.minor.size     : 4      ## minor tick size in points</span>
<span id="cb4-4"><a href="#cb4-4"></a>xtick.major.width    : 0.5    ## major tick width in points</span>
<span id="cb4-5"><a href="#cb4-5"></a>xtick.minor.width    : 0.5    ## minor tick width in points</span>
<span id="cb4-6"><a href="#cb4-6"></a>xtick.major.pad      : 6    ## distance to major tick label in points</span>
<span id="cb4-7"><a href="#cb4-7"></a>xtick.direction      : in    ## direction: in, out, or inout</span>
<span id="cb4-8"><a href="#cb4-8"></a>xtick.minor.visible  : True  ## visibility of minor ticks on x-axis</span>
<span id="cb4-9"><a href="#cb4-9"></a>ytick.right          : True   ## draw ticks on the right side</span>
<span id="cb4-10"><a href="#cb4-10"></a>ytick.major.size     : 8      ## major tick size in points</span>
<span id="cb4-11"><a href="#cb4-11"></a>ytick.minor.size     : 4      ## minor tick size in points</span>
<span id="cb4-12"><a href="#cb4-12"></a>ytick.major.width    : 0.5    ## major tick width in points</span>
<span id="cb4-13"><a href="#cb4-13"></a>ytick.minor.width    : 0.5    ## minor tick width in points</span>
<span id="cb4-14"><a href="#cb4-14"></a>ytick.major.pad      : 6    ## distance to major tick label in points</span>
<span id="cb4-15"><a href="#cb4-15"></a>ytick.direction      : in     ## direction: in, out, or inout</span>
<span id="cb4-16"><a href="#cb4-16"></a>ytick.minor.visible  : True  ## visibility of minor ticks on y-axis</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="grid" class="level2">
<h2 class="anchored" data-anchor-id="grid">GRID</h2>
<p>Although I used to love grid, they might make the plot a bit “heavy” to read when there are several points and lines. For this reason I kept grids disabled:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>my_matplotlibrc.txt</strong></pre>
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource txt number-lines code-with-copy"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1"></a>grid.color       :   k    ## black</span>
<span id="cb5-2"><a href="#cb5-2"></a>grid.linestyle   :   --         ## dashed</span>
<span id="cb5-3"><a href="#cb5-3"></a>grid.linewidth   :   0.5       ## in points</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="legend" class="level2">
<h2 class="anchored" data-anchor-id="legend">LEGEND</h2>
<p>Regardin the legend handling I got some inspirations by having a look at some common plots used within the community I am working with:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>my_matplotlibrc.txt</strong></pre>
</div>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource txt number-lines code-with-copy"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1"></a>legend.frameon       : True     ## if True, draw the legend on a background patch</span>
<span id="cb6-2"><a href="#cb6-2"></a>legend.framealpha    : None      ## legend patch transparency</span>
<span id="cb6-3"><a href="#cb6-3"></a>legend.edgecolor     : inherit      ## background patch boundary color</span>
<span id="cb6-4"><a href="#cb6-4"></a>legend.fancybox      : False     ## if True, use a rounded box for the</span>
<span id="cb6-5"><a href="#cb6-5"></a>                                 ## legend background, else a rectangle</span>
<span id="cb6-6"><a href="#cb6-6"></a>legend.scatterpoints : 3        ## number of scatter points</span>
<span id="cb6-7"><a href="#cb6-7"></a>legend.fontsize      : large</span>
<span id="cb6-8"><a href="#cb6-8"></a>legend.handlelength  : 0.7      ## the length of the legend lines</span>
<span id="cb6-9"><a href="#cb6-9"></a>legend.handleheight  : 1      ## the height of the legend handle</span>
<span id="cb6-10"><a href="#cb6-10"></a>legend.handletextpad : 1.2      ## the space between the legend line and legend text</span>
<span id="cb6-11"><a href="#cb6-11"></a>legend.borderaxespad : 1      ## the border between the axes and legend edge</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="figure" class="level2">
<h2 class="anchored" data-anchor-id="figure">FIGURE</h2>
<p>Although there are really no standard on the figure sizes I like a default 3:2 ratio and a minimum DPI of 300:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>my_matplotlibrc.txt</strong></pre>
</div>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource txt number-lines code-with-copy"><code class="sourceCode default"><span id="cb7-1"><a href="#cb7-1"></a>figure.figsize   : 6, 4       ## figure size in inches</span>
<span id="cb7-2"><a href="#cb7-2"></a>figure.dpi       : 300        ## figure dots per inch</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="other-tweakings" class="level2">
<h2 class="anchored" data-anchor-id="other-tweakings">Other tweakings</h2>
<p>I have set the cap size of the error bars, as by default is 0 and set the histogram binning to <code>"auto"</code>:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>my_matplotlibrc.txt</strong></pre>
</div>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource txt number-lines code-with-copy"><code class="sourceCode default"><span id="cb8-1"><a href="#cb8-1"></a>errorbar.capsize : 1.5            ## length of end cap on error bars in pixels</span>
<span id="cb8-2"><a href="#cb8-2"></a>hist.bins : auto                 ## The default number of histogram bins.</span>
<span id="cb8-3"><a href="#cb8-3"></a>                                  ## If Numpy 1.11 or later is</span>
<span id="cb8-4"><a href="#cb8-4"></a>                                  ## installed, may also be `auto`</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="final-results" class="level1">
<h1>Final results</h1>
<p>If I try to make again the plot in Figure <a href="#fig-default-matplotlib">Figure&nbsp;2</a> with these new defaults and put it side by side to a ROOT plot I get something like this:</p>
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="im">import</span> ROOT <span class="im">as</span> rt</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a>x <span class="op">=</span> np.array([<span class="fl">321.0</span>, <span class="fl">860.0</span>, <span class="fl">777.0</span>, <span class="fl">562.0</span>, <span class="fl">374.0</span>, <span class="fl">132.0</span>, <span class="fl">816.0</span>, <span class="fl">220.0</span>, <span class="fl">253.0</span>])</span>
<span id="cb9-6"><a href="#cb9-6"></a>y <span class="op">=</span> np.array([<span class="fl">134.0</span>,<span class="fl">307.0</span>,<span class="fl">299.0</span>,<span class="fl">213.0</span>,<span class="fl">135.0</span>,<span class="fl">50.0</span>,<span class="fl">297.0</span>,<span class="fl">85.0</span>,<span class="fl">95.0</span>])</span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co"># Use a context manager to plot only this plot with newer values</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>plt.style.use(<span class="st">'https://gitlab.cern.ch/-/snippets/2223/raw/master/rpcecogas.mplstyle'</span>)</span>
<span id="cb9-10"><a href="#cb9-10"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb9-11"><a href="#cb9-11"></a>ax.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Rate vs. Currents'</span>, xlabel<span class="op">=</span><span class="st">'Rate [Hz/cm$^2$]'</span>, ylabel<span class="op">=</span><span class="st">'Currents [uA]'</span>)</span>
<span id="cb9-12"><a href="#cb9-12"></a>ax.plot(x, y, <span class="st">'.'</span>)</span>
<span id="cb9-13"><a href="#cb9-13"></a>ax.axhline(<span class="dv">150</span>, color<span class="op">=</span><span class="st">'r'</span>)</span>
<span id="cb9-14"><a href="#cb9-14"></a></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co"># ROOT</span></span>
<span id="cb9-16"><a href="#cb9-16"></a>canvas <span class="op">=</span> rt.TCanvas(<span class="st">"rate_vs_current"</span>, <span class="st">"Rate vs. Currents"</span>)</span>
<span id="cb9-17"><a href="#cb9-17"></a>graph <span class="op">=</span> rt.TGraph(<span class="bu">len</span>(x), x, y)</span>
<span id="cb9-18"><a href="#cb9-18"></a>graph.SetTitle(<span class="st">"Rate vs. Currents"</span>)</span>
<span id="cb9-19"><a href="#cb9-19"></a>graph.SetMarkerStyle(<span class="dv">7</span>)</span>
<span id="cb9-20"><a href="#cb9-20"></a>graph.GetXaxis().SetTitle(<span class="st">"Rate [Hz/cm^</span><span class="sc">{2}</span><span class="st">]"</span>)</span>
<span id="cb9-21"><a href="#cb9-21"></a>graph.GetYaxis().SetTitle(<span class="st">"Currents [uA]"</span>)</span>
<span id="cb9-22"><a href="#cb9-22"></a>line <span class="op">=</span> rt.TLine(graph.GetXaxis().GetXmin(), <span class="dv">150</span>, graph.GetXaxis().GetXmax(), <span class="dv">150</span>)</span>
<span id="cb9-23"><a href="#cb9-23"></a>line.SetLineColor(rt.kRed)</span>
<span id="cb9-24"><a href="#cb9-24"></a>graph.Draw(<span class="st">'AP'</span>)</span>
<span id="cb9-25"><a href="#cb9-25"></a>line.Draw(<span class="st">"L"</span>)</span>
<span id="cb9-26"><a href="#cb9-26"></a>canvas.Draw()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell quarto-layout-panel" data-execution_count="15">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-new-default-matplotlib" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-new-default-matplotlib-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Custom matplotlib plot</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-new-default-matplotlib" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-new-default-matplotlib-output-2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;4: Default ROOT plot</figcaption><p></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<p>As you can notice in <a href="#fig-new-default-matplotlib">Figure&nbsp;4</a>, the plots look similar. I have left a bigger x and y label titles for better readability and I have left the default <code>tab10</code> matplotlib palette for colors, as I don’t like the palette handling in ROOT.</p>
<p>You can find the stylesheet I am currently using available as a gitlab snippet here: https://gitlab.cern.ch/-/snippets/2223 There are couple of ways to use a stylesheet. The first, that applies globally, is to use <code>plt.style.use(url)</code>. The second instead, could be using a context manager provided by matplotlib that allows to apply styles on a plot within the context manager itself. For more information, see the <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.rc_context.html">matplotlib documentation on <code>rc_context</code></a> There is only one caveat that I noticed when writing this post: if I use <code>rc_context</code> then I have some issues loading the system’s font and the plot will fallback to some defaults fonts. I don’t know if this is a matplotlib bug or if it is related to my local machine. I will have to investigate</p>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<p>In this post I highlighted the matplotlib configuration I changed to have default plots looking more like ROOT. I am making a heavy use of these styles and I have observed that very few people notice that difference between a ROOT like plot and one made with these defaults.</p>
<p>In the future I plan to revise a little bit the configuration to further improve the layout.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="grigolet/blog-comments" data-repo-id="R_kgDOH9KztA" data-category="General" data-category-id="DIC_kwDOH9KztM4CRSJC" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>